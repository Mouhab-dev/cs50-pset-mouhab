{% extends "layout.html" %}

{% block title %}
    Portfolio
{% endblock %}

{% block main %}
    <h4> Welcome, {{ username }} </h4>
    <form class="form-inline col-md-offset-2 col-md-7" action="/sell" method="post">
        <div class="form-group form_margin">
            <select class="form-control" name="symbol">
                <option disabled="" selected="" value="">Symbol</option>
                    {% for symbol in symbols %}
                    <option>{{ symbol['symbol'] }}</option>
                    {% endfor %}
            </select>
        </div>
        <div class="form-group form_margin">
            <input autocomplete="off" class="form-control" min="1" name="shares" placeholder="Shares" type="number">
        </div>
        <button class="btn btn-primary form_margin" type="submit" formaction="/buy">Buy</button>
        <button class="btn btn-primary form_margin" type="submit">Sell</button>
    </form>
    <br>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Symbol</th>
                <th>Name</th>
                <th>Shares</th>
                <th>Price</th>
                <th>TOTAL</th>
            </tr>
        </thead>
        <tbody >
            {% for i in stocks %}
            <tr>
                <th style="font-weight: noraml;">{{ i[0] }}</th>
                <td>{{ i[1] }}</td>
                <td>{{ i[2] }}</td>
                <td>${{ "{:,.2f}".format(i[3]) }}</td>
                <td>${{ "{:,.2f}".format(i[4]) }}</td>
            </tr>
            {% endfor %}
            <tr>
                <th>Available Cash</th>
                <td></td>
                <td></td>
                <td></td>
                <td>${{ "{:,.2f}".format(cash) }}</td>
            </tr>
            <tr>
                <th>Total</th>
                <td></td>
                <td></td>
                <td></td>
                <td style="font-weight: bold;">${{ "{:,.2f}".format(total) }}</td>
            </tr>
        </tbody>
    </table>
{% endblock %}
